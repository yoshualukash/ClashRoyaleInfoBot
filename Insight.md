# What i learn while creating this bot:
## Bearer Authentication
First thing that i learn while creating this bot is about **Bearer Authentication**.
Bearer authentication (also called token authentication) is an HTTP authentication scheme that involves security tokens called bearer tokens. The name “Bearer authentication” can be understood as “give access to the bearer of this token.” The bearer token is a cryptic string, usually generated by the server in response to a login request. The client must send this token in the Authorization header when making requests to protected resources. 
So basically in order to access the protected, file i need to find out what does the token means and how to access it. It took me quite a while to understand how to get the json files and process it by my own. 

The tokens looks like this :
```
token = "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiIsImtpZCI6IjI4YTMxOGY3LTAwMDAtYTFlYi03ZmExLTJjNzQzM2M2Y2NhNSJ9.eyJpc3MiOiJzdXBlcmNlbGwiLCJhdWQiOiJzdXBlcmNlbGw6Z2FtZWFwaSIsImp0aSI6ImExNWE4NjkyLTJiYTktNDk5MC05NjViLTc0NzUzOTFiYzY1ZCIsImlhdCI6MTU5NDM3ODg1OCwic3ViIjoiZGV2ZWxvcGVyLzYzNzY1YzdiLWQzMTctODE0Yy0wZDdkLTVjOWM3M2VlMTgxMiIsInNjb3BlcyI6WyJyb3lhbGUiXSwibGltaXRzIjpbeyJ0aWVyIjoiZGV2ZWxvcGVyL3NpbHZlciIsInR5cGUiOiJ0aHJvdHRsaW5nIn0seyJjaWRycyI6WyIzNi45MC4yMTUuMjQ5Il0sInR5cGUiOiJjbGllbnQifV19.UvyeUTuKVeSDJXsx9JS_P1vK3WdYShxVmag6EzBtaJdmRhJgkvHLlObe5Oum9TQsfA2Gjt2w3q4AfKudDNTOwg"
```
## Fetch Internet Resources 
After i understand what does the token do, then i learn about how to use it in python. The token must be passed in every API request in Authorization HTTP header using Bearer authentication scheme. 

The game authorization header look like this:
```
Authorization: Bearer API_TOKEN
```
I use urllib.request to do the http request on python.
```
headers = {"Authorization": "Bearer " + token}
base_url = "https://api.clashroyale.com/v1"
players = "/players"
code = "/%23YCJ2YPYR"
request = urllib.request.Request(base_url+players+code, None, headers=headers)
response = urllib.request.urlopen(request).read().decode("utf-8")
```
Which basically means i'm accessing the game data with the authorization key(token) that is given by the game itself.

The code above return a json data of the game, something like this: 
```
{"tag":"#YCJ2YPYR","name":"SADAMBreakBEST","expLevel":13,"trophies":4854,"bestTrophies":6021,"wins":2982,"losses":2041,"battleCount":9536,"threeCrownWins":1251,"challengeCardsWon":813,"challengeMaxWins":9,"tournamentCardsWon":0,"tournamentBattleCount":309,"role":"coLeader","donations":392,"donationsReceived":360,"totalDonations":33799,"warDayWins":48,"clanCardsCollected":139166,"clan":{"tag":"#Y0JQP2R","name":"Champion","badgeId":16000014},"arena":{"id":54000014,"name":"Challenger III"},"leagueStatistics":{"currentSeason":{"trophies":4854,"bestTrophies":4854},......
```
After knowing how to get the json, then i started playing around with the data.
## Public IP Address
When creating a key you need to specify the Public IP addresses that are allowed to access the API endpoints. At first i was confused because the code is returning 404 error even though there's no mistake in my code. Turns out i'm listing my private ip address when creating the API key. The confusion did not stop just there. After listing my public ip address, i could access the json data. But the next day i got the same error while running the code again. Turns out the public IP address is changing everytime i restart the router or everytime i turn off my computer. Till this day i still couldn't figured out how to obtain static public IP address, so it's still a problem to me because i had to change my API key to the new one everytime i'm continuing this bot. But on a positive note, because of this now i know the difference between public and private ip address and why the public ip address keep changing everyday.  
